<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CPM ‚Ä¢ Painel</title>

  <!-- CSS TEM QUE ESTAR NO MESMO DIRET√ìRIO -->
  <link rel="icon" href="assets/logo.png" />
  <link rel="stylesheet" href="style.css?v=24" />
</head>

<body data-page="app">
  <header class="topbar">
    <div class="brand">
      <img src="assets/logo.png" alt="Logo" class="logo" />
      <div class="brand-text">
        <h1>CPM ‚Ä¢ Painel</h1>
        <small id="who" class="muted">‚Ä¶</small>
      </div>
    </div>
    <nav class="nav">
      <a class="link" href="index.html">üîê Login</a>
      <button id="btnLogout" class="btn ghost">Sair</button>
    </nav>
  </header>

  <main class="wrap">

    <!-- Bloco r√°pido de busca por CPM -->
    <section class="card">
      <h2>üîé Busca</h2>
      <div class="grid">
        <div class="field">
          <label>CPM</label>
          <input id="buscaCPM" placeholder="Ex.: CPM-01" />
        </div>
        <div class="field">
          <label>&nbsp;</label>
          <button id="btnBuscar" class="btn">Consultar</button>
        </div>
      </div>
      <pre id="resultado" class="pre muted" style="margin-top:.75rem"></pre>
    </section>

    <!-- Cadastro -->
    <section class="card">
      <h2>üÜï Novo registro</h2>

      <div id="criadoMsg" class="muted" style="margin-bottom:.5rem"></div>

      <div class="grid">
        <div class="field">
          <label>CPM (ID do item)</label>
          <input id="novoCPM" placeholder="Ex.: CPM-01" />
        </div>

        <div class="field">
          <label>Status</label>
          <select id="novoStatus">
            <option>ONLINE</option>
            <option>EM ESTOQUE</option>
            <option>EM MANUTEN√á√ÉO</option>
          </select>
        </div>

        <div class="field">
          <label>Data de fabrica√ß√£o</label>
          <input id="novoDataFab" type="date" />
        </div>

        <div class="field">
          <label>Senha do cadeado</label>
          <input id="novoSenhaCadeado" placeholder="Ex.: 1234" />
        </div>

        <div class="field">
          <label>Login Modem (CLARO)</label>
          <input id="novoModemLogin" placeholder="login" />
        </div>

        <div class="field">
          <label>Senha Modem (CLARO)</label>
          <input id="novoModemSenha" placeholder="senha" />
        </div>

        <div class="field">
          <label>N√∫mero do chip</label>
          <input id="novoNumeroChip" placeholder="ICCID ou telefone" />
        </div>

        <div class="field field-full">
          <label>Observa√ß√µes (opcional)</label>
          <textarea id="novoDescricao" rows="3"></textarea>
        </div>
      </div>

      <div class="field">
        <label>Fotos (at√© 5) ‚Äî voc√™ pode remover antes de salvar</label>
        <input id="fotos" type="file" accept="image/*" multiple />
        <div id="preview" class="thumbs"></div>
      </div>

      <div class="actions">
        <button id="btnCriar" class="btn primary">Salvar</button>
        <button id="btnLimpar" class="btn ghost" onclick="document.getElementById('novoCPM').value='';document.getElementById('novoDescricao').value='';document.getElementById('novoDataFab').value='';document.getElementById('novoSenhaCadeado').value='';document.getElementById('novoModemLogin').value='';document.getElementById('novoModemSenha').value='';document.getElementById('novoNumeroChip').value='';">Limpar</button>
      </div>
    </section>

    <!-- Lista -->
    <section class="card">
      <h2>üìã Registros</h2>

      <div class="grid">
        <div class="field">
          <label>Buscar</label>
          <input id="buscaLista" placeholder="CPM ou observa√ß√£o‚Ä¶" />
        </div>

        <div class="field">
          <label>Status</label>
          <select id="filtroStatusLista">
            <option>Todos</option>
            <option>ONLINE</option>
            <option>EM ESTOQUE</option>
            <option>EM MANUTEN√á√ÉO</option>
          </select>
        </div>

        <div class="field">
          <label>Ordenar por</label>
          <select id="ordenarPor">
            <option value="data_desc">Mais novo ‚Üí antigo</option>
            <option value="data_asc">Mais antigo ‚Üí novo</option>
            <option value="cpm_asc">CPM A ‚Üí Z</option>
            <option value="cpm_desc">CPM Z ‚Üí A</option>
          </select>
        </div>

        <div class="field">
          <label>&nbsp;</label>
          <div class="row gap">
            <button id="btnAtualizar" class="btn">Atualizar</button>
            <button id="exportCsv" class="btn ghost">Exportar CSV</button>
          </div>
        </div>
      </div>

      <ul id="lista" class="list"></ul>
    </section>
  </main>

  <!-- Modal de edi√ß√£o -->
  <dialog id="editModal" class="modal">
    <form method="dialog" class="card" style="min-width:min(780px,96vw);">
      <h2>‚úèÔ∏è Editar</h2>
      <input type="hidden" id="editCPM" />
      <div class="grid">
        <div class="field">
          <label>CPM</label>
          <input id="editCPMShown" disabled />
        </div>
        <div class="field">
          <label>Status</label>
          <select id="editStatus">
            <option>ONLINE</option>
            <option>EM ESTOQUE</option>
            <option>EM MANUTEN√á√ÉO</option>
          </select>
        </div>

        <div class="field">
          <label>Data de fabrica√ß√£o</label>
          <input id="editDataFab" type="date" />
        </div>

        <div class="field">
          <label>Senha do cadeado</label>
          <input id="editSenhaCadeado" />
        </div>

        <div class="field">
          <label>Login Modem</label>
          <input id="editModemLogin" />
        </div>

        <div class="field">
          <label>Senha Modem</label>
          <input id="editModemSenha" />
        </div>

        <div class="field">
          <label>N√∫mero do chip</label>
          <input id="editNumeroChip" />
        </div>

        <div class="field field-full">
          <label>Observa√ß√µes</label>
          <textarea id="editObservacoes" rows="3"></textarea>
        </div>

        <div class="field field-full">
          <label>Fotos atuais</label>
          <div id="editFotosExistentes" class="thumbs"></div>
        </div>

        <div class="field field-full">
          <label>Adicionar novas fotos</label>
          <input id="editNovasFotos" type="file" accept="image/*" multiple />
          <div id="editPreviewNovas" class="thumbs"></div>
        </div>
      </div>

      <div class="actions">
        <button type="button" id="salvarEdicao" class="btn">Salvar</button>
        <button class="btn ghost" value="cancel">Cancelar</button>
      </div>
    </form>
  </dialog>

  <!-- Modal Export CSV -->
  <dialog id="exportModal" class="modal">
    <form method="dialog" class="card" style="min-width:min(680px,96vw);">
      <h2>‚¨áÔ∏è Exportar CSV</h2>
      <div class="grid">
        <div class="field">
          <label>Quantidade m√°x.</label>
          <input id="expQtd" type="number" value="500" min="1" max="5000" />
        </div>
        <div class="field">
          <label>Status</label>
          <select id="expStatus">
            <option>Todos</option>
            <option>ONLINE</option>
            <option>EM ESTOQUE</option>
            <option>EM MANUTEN√á√ÉO</option>
          </select>
        </div>

        <div class="field field-full">
          <label>CPMs espec√≠ficos (um por linha, opcional)</label>
          <textarea id="expCpms" rows="4" placeholder="CPM-01&#10;CPM-02"></textarea>
        </div>
      </div>

      <div class="cols">
        <div>
          <strong>Colunas</strong> ‚Äî <button type="button" id="expToggle" class="btn xsm">Marcar/Desmarcar</button>
          <div class="cols-2" style="margin-top:.5rem">
            <label><input class="exp-col" type="checkbox" value="cpm" checked /> CPM</label>
            <label><input class="exp-col" type="checkbox" value="status" checked /> Status</label>
            <label><input class="exp-col" type="checkbox" value="dataFabricacao" checked /> Data Fabrica√ß√£o</label>
            <label><input class="exp-col" type="checkbox" value="senhaCadeado" /> Senha Cadeado</label>
            <label><input class="exp-col" type="checkbox" value="modemLogin" /> Modem Login</label>
            <label><input class="exp-col" type="checkbox" value="modemSenha" /> Modem Senha</label>
            <label><input class="exp-col" type="checkbox" value="numeroChip" /> N√∫mero Chip</label>
            <label><input class="exp-col" type="checkbox" value="observacoes" checked /> Observa√ß√µes</label>
            <label><input class="exp-col" type="checkbox" value="email" /> Criado por (email)</label>
            <label><input class="exp-col" type="checkbox" value="criadoEm" /> Criado em</label>
            <label><input class="exp-col" type="checkbox" value="fotos" /> URLs das fotos</label>
          </div>
        </div>
      </div>

      <div class="actions">
        <button id="expConfirm" type="button" class="btn">Exportar</button>
        <button id="expCancel" class="btn ghost" value="cancel">Cancelar</button>
      </div>
    </form>
  </dialog>

  <!-- JS (precisa estar no mesmo diret√≥rio) -->
  <script type="module" src="app.js?v=24"></script>
</body>
</html>

